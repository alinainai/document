一个 `class` 文件被加载到内存中需要经过 3 大步：装载、链接、初始化。

其中链接又可以细分为：验证、准备、解析 3 小步。

<img width="800" alt="类文件加载" src="https://user-images.githubusercontent.com/17560388/150710782-73b14a2f-80d2-4f0d-8977-79363b4b82e2.png">

### 1. 装载

装载是指 `java` 虚拟机查找 `class` 文件并生成字节流，然后根据字节流创建 `java.lang.Class` 对象的过程。

这一过程主要完成以下 3 件事：

1. `classLoader` 通过一个类的全限定名（包名 + 类名）来查找 `class` 文件，并生成二进制字节流：其中 `class` 字节码文件的来源不一定是 `class` 文件，也可以是 `jar` 包、`zip` 包，甚至是来源于网络的字节流。

2. 把 `class` 文件的各个部分分别解析（parse）为 `jvm` 内部特定的数据结构，并存储在方法区。

3. 在内存中创建一个 `java.lang.Class` 类型的对象：接下来程序在运行过程中所有对该类的访问都通过这个`类对象`，也就是这个 `Class` 类型的类对象是提供给外界访问该类的接口。

### 2. 加载时机

隐式装载：在程序运行过程中，当碰到通过 new 等方式生成对象时，系统会隐式调用 ClassLoader 去装载对应的 class 到内存中；

显示装载：在编写源代码时，主动调用 Class.forName() 等方法也会进行 class 装载操作，这种方式通常称为显示装载。

