`Java Memory Model`，简称 `JMM`。描述`多线程并发`、`CPU 缓存`等方面的内容。

<img width="400" alt="类图" src="https://user-images.githubusercontent.com/17560388/150741954-73205f18-d7e5-4032-9f63-d93eea9d67a2.png">

在每一个线程中，都会有一块内部的工作内存（working memor），工作内存是对 CPU 寄存器和高速缓存的抽象描述。这块工作内存保存了主内存共享数据的拷贝副本。
   
### 1. CPU 架构

为了“压榨”处理性能，达到“高并发”的效果，在 CPU 中添加了高速缓存（cache）来作为缓冲。

<img width="400" alt="类图" src="https://user-images.githubusercontent.com/17560388/150743732-cdc5b695-d392-4599-bff0-5b4c871a3bde.png">

在执行任务时，CPU 会先将运算所需要使用到的数据复制到高速缓存中，让运算能够快速进行，当运算完成之后，再将缓存中的结果刷回（flush back）主内存，这样 CPU 就不用等待主内存的读写操作了。

### 2. 缓存一致性问题

设备可能有两个或者多个 CPU，并且其中一些 CPU 还有多核。当运行多线程程序时，可能存在多个线程在同一时刻被不同的CPU执行，而每个 CPU 都有自己的高速缓存，保存了主内存共享数据的拷贝副本。

当多个处理器同时操作同一块主内存数据区域，但高速缓存中的数据不及时刷回主内存时，会导致数据不一致。

